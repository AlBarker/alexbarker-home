import { Component } from '@angular/core';
import { BehaviorSubject, catchError, map, Observable, of, Subject } from 'rxjs';

export interface TrackModel {
  name: string;
  artist: string;
  position: number;
  addedByName: string;
  addedByImage: string;
  albumArt: string;
}

@Component({
  selector: 'app-countdown2022',
  templateUrl: './countdown2022.component.html',
  styleUrls: ['./countdown2022.component.scss']
})
export class Countdown2022Component {
  public tracks$: Observable<TrackModel[]>;
  public tracksByUser$: Observable<Record<string, number>>;
  public nowPlayingTrack$: Observable<TrackModel | undefined>;
  public noTracksToShow$ = new BehaviorSubject<boolean>(false);
  public error$ = new Subject<string>;

  private readonly userSummaryResponse = {"Scott Leah":1,"Jack McGrath":11,"Alex Karney":11,"Joshua Landy":11,"Griffyn Heels":11,"Josh Anderson":11,"Braeden Wilson":11,"Alex Barker":11,"Daniel Hornblower":11,"Chris Quigley":11};
  private readonly trackListResponse = [{"name":"Rich Spirit","artist":"Kendrick Lamar","position":1,"addedByName":"Scott Leah","addedByImage":"sl","albumArt":"/assets/art/Kendrick Lamar Rich Spirit.png"},{"name":"fleahouse","artist":"Static Dress","position":2,"addedByName":"Jack McGrath","addedByImage":"jm","albumArt":"/assets/art/Static Dress fleahouse.png"},{"name":"Spiracle","artist":"Flower Face","position":3,"addedByName":"Alex Karney","addedByImage":"ak","albumArt":"/assets/art/Flower Face Spiracle.png"},{"name":"The Curse of the Blackened Eye","artist":"Orville Peck","position":4,"addedByName":"Alex Karney","addedByImage":"ak","albumArt":"/assets/art/Orville Peck The Curse of the Blackened Eye.png"},{"name":"caffeine","artist":"brakence","position":5,"addedByName":"Joshua Landy","addedByImage":"jl","albumArt":"/assets/art/brakence caffeine.png"},{"name":"Jaguar","artist":"Action Bronson","position":6,"addedByName":"Griffyn Heels","addedByImage":"gh","albumArt":"/assets/art/Action Bronson Jaguar.png"},{"name":"Remember Me","artist":"Gabriels","position":7,"addedByName":"Josh Anderson","addedByImage":"ja","albumArt":"/assets/art/Gabriels Remember Me.png"},{"name":"TV","artist":"Billie Eilish","position":8,"addedByName":"Alex Karney","addedByImage":"ak","albumArt":"/assets/art/Billie Eilish TV.png"},{"name":"New Gold (feat. Tame Impala and Bootie Brown)","artist":"Gorillaz, Tame Impala, Bootie Brown","position":9,"addedByName":"Joshua Landy","addedByImage":"jl","albumArt":"/assets/art/Gorillaz, Tame Impala, Bootie Brown New Gold (feat. Tame Impala and Bootie Brown).png"},{"name":"Dr. Fauci Didn't Kill Himself","artist":"DREGG","position":10,"addedByName":"Braeden Wilson","addedByImage":"bw","albumArt":"/assets/art/DREGG Dr. Fauci Didn't Kill Himself.png"},{"name":"The Way It Shatters","artist":"Rolling Blackouts Coastal Fever","position":11,"addedByName":"Jack McGrath","addedByImage":"jm","albumArt":"/assets/art/Rolling Blackouts Coastal Fever The Way It Shatters.png"},{"name":"Mr Worldwide","artist":"Pete & Bas","position":12,"addedByName":"Alex Barker","addedByImage":"ab","albumArt":"/assets/art/Pete & Bas Mr Worldwide.png"},{"name":"Blue Eye Lake","artist":"Rolling Blackouts Coastal Fever","position":13,"addedByName":"Daniel Hornblower","addedByImage":"db","albumArt":"/assets/art/Rolling Blackouts Coastal Fever Blue Eye Lake.png"},{"name":"maybe (feat. Bring Me The Horizon)","artist":"Machine Gun Kelly, Bring Me The Horizon","position":14,"addedByName":"Alex Karney","addedByImage":"ak","albumArt":"/assets/art/Machine Gun Kelly, Bring Me The Horizon maybe (feat. Bring Me The Horizon).png"},{"name":"boy","artist":"The Killers","position":15,"addedByName":"Daniel Hornblower","addedByImage":"db","albumArt":"/assets/art/The Killers boy.png"},{"name":"Gonna Lose","artist":"Built To Spill","position":16,"addedByName":"Josh Anderson","addedByImage":"ja","albumArt":"/assets/art/Built To Spill Gonna Lose.png"},{"name":"Matilda","artist":"PUP","position":17,"addedByName":"Daniel Hornblower","addedByImage":"db","albumArt":"/assets/art/PUP Matilda.png"},{"name":"N95","artist":"Kendrick Lamar","position":18,"addedByName":"Joshua Landy","addedByImage":"jl","albumArt":"/assets/art/Kendrick Lamar N95.png"},{"name":"There's Only One (feat. Genesis Owusu)","artist":"Winston Surfshirt, Genesis Owusu","position":19,"addedByName":"Daniel Hornblower","addedByImage":"db","albumArt":"/assets/art/Winston Surfshirt, Genesis Owusu There's Only One (feat. Genesis Owusu).png"},{"name":"Did you know that there's a tunnel under Ocean Blvd","artist":"Lana Del Rey","position":20,"addedByName":"Alex Karney","addedByImage":"ak","albumArt":"/assets/art/Lana Del Rey Did you know that there's a tunnel under Ocean Blvd.png"},{"name":"Freight Yard","artist":"The Garden","position":21,"addedByName":"Jack McGrath","addedByImage":"jm","albumArt":"/assets/art/The Garden Freight Yard.png"},{"name":"Neverita","artist":"Bad Bunny","position":22,"addedByName":"Chris Quigley","addedByImage":"cq","albumArt":"/assets/art/Bad Bunny Neverita.png"},{"name":"After LIKE","artist":"IVE","position":23,"addedByName":"Alex Barker","addedByImage":"ab","albumArt":"/assets/art/IVE After LIKE.png"},{"name":"Jimmy Cooks (feat. 21 Savage)","artist":"Drake, 21 Savage","position":24,"addedByName":"Braeden Wilson","addedByImage":"bw","albumArt":"/assets/art/Drake, 21 Savage Jimmy Cooks (feat. 21 Savage).png"},{"name":"Delilah (pull me out of this)","artist":"Fred again.., Delilah Montagu","position":25,"addedByName":"Joshua Landy","addedByImage":"jl","albumArt":"/assets/art/Fred again.., Delilah Montagu Delilah (pull me out of this).png"},{"name":"Real Low Down Lonesome","artist":"Early James, Sierra Ferrell","position":26,"addedByName":"Josh Anderson","addedByImage":"ja","albumArt":"/assets/art/Early James, Sierra Ferrell Real Low Down Lonesome.png"},{"name":"DOMINATRIX","artist":"Void Of Vision","position":27,"addedByName":"Braeden Wilson","addedByImage":"bw","albumArt":"/assets/art/Void Of Vision DOMINATRIX.png"},{"name":"DM","artist":"fromis_9","position":28,"addedByName":"Josh Anderson","addedByImage":"ja","albumArt":"/assets/art/fromis_9 DM.png"},{"name":"Blonde","artist":"Maisie Peters","position":29,"addedByName":"Alex Karney","addedByImage":"ak","albumArt":"/assets/art/Maisie Peters Blonde.png"},{"name":"Cold","artist":"George FitzGerald","position":30,"addedByName":"Griffyn Heels","addedByImage":"gh","albumArt":"/assets/art/George FitzGerald Cold.png"},{"name":"Shirt","artist":"SZA","position":31,"addedByName":"Alex Barker","addedByImage":"ab","albumArt":"/assets/art/SZA Shirt.png"},{"name":"Dreamin Of The Past (feat. Kanye West)","artist":"Pusha T, Kanye West","position":32,"addedByName":"Griffyn Heels","addedByImage":"gh","albumArt":"/assets/art/Pusha T, Kanye West Dreamin Of The Past (feat. Kanye West).png"},{"name":"Milk","artist":"Beddy Rays","position":33,"addedByName":"Daniel Hornblower","addedByImage":"db","albumArt":"/assets/art/Beddy Rays Milk.png"},{"name":"My Echo","artist":"Rolling Blackouts Coastal Fever","position":34,"addedByName":"Daniel Hornblower","addedByImage":"db","albumArt":"/assets/art/Rolling Blackouts Coastal Fever My Echo.png"},{"name":"Punk Rock Loser","artist":"Viagra Boys","position":35,"addedByName":"Chris Quigley","addedByImage":"cq","albumArt":"/assets/art/Viagra Boys Punk Rock Loser.png"},{"name":"Clarity","artist":"Vance Joy","position":36,"addedByName":"Alex Karney","addedByImage":"ak","albumArt":"/assets/art/Vance Joy Clarity.png"},{"name":"Sans Soleil","artist":"Alexisonfire","position":37,"addedByName":"Jack McGrath","addedByImage":"jm","albumArt":"/assets/art/Alexisonfire Sans Soleil.png"},{"name":"STAR WALKIN' (League of Legends Worlds Anthem)","artist":"Lil Nas X","position":38,"addedByName":"Braeden Wilson","addedByImage":"bw","albumArt":"/assets/art/Lil Nas X STAR WALKIN' (League of Legends Worlds Anthem).png"},{"name":"Pomeranian Spinster","artist":"Alvvays","position":39,"addedByName":"Josh Anderson","addedByImage":"ja","albumArt":"/assets/art/Alvvays Pomeranian Spinster.png"},{"name":"sweet.","artist":"Static Dress","position":40,"addedByName":"Alex Barker","addedByImage":"ab","albumArt":"/assets/art/Static Dress sweet..png"},{"name":"sTraNgeRs","artist":"Bring Me The Horizon","position":41,"addedByName":"Braeden Wilson","addedByImage":"bw","albumArt":"/assets/art/Bring Me The Horizon sTraNgeRs.png"},{"name":"King","artist":"Florence + The Machine","position":42,"addedByName":"Daniel Hornblower","addedByImage":"db","albumArt":"/assets/art/Florence + The Machine King.png"},{"name":"Doritos & Fritos","artist":"100 gecs, Laura Les, Dylan Brady","position":43,"addedByName":"Joshua Landy","addedByImage":"jl","albumArt":"/assets/art/100 gecs, Laura Les, Dylan Brady Doritos & Fritos.png"},{"name":"stabilise","artist":"Nilüfer Yanya","position":44,"addedByName":"Josh Anderson","addedByImage":"ja","albumArt":"/assets/art/Nilüfer Yanya stabilise.png"},{"name":"CLUB BANGER","artist":"Sickmode, Rooler","position":45,"addedByName":"Braeden Wilson","addedByImage":"bw","albumArt":"/assets/art/Sickmode, Rooler CLUB BANGER.png"},{"name":"The Place Where He Inserted the Blade","artist":"Black Country, New Road","position":46,"addedByName":"Jack McGrath","addedByImage":"jm","albumArt":"/assets/art/Black Country, New Road The Place Where He Inserted the Blade.png"},{"name":"Stars In My Eyes","artist":"Ball Park Music","position":47,"addedByName":"Daniel Hornblower","addedByImage":"db","albumArt":"/assets/art/Ball Park Music Stars In My Eyes.png"},{"name":"Sunset","artist":"Caroline Polachek","position":48,"addedByName":"Joshua Landy","addedByImage":"jl","albumArt":"/assets/art/Caroline Polachek Sunset.png"},{"name":"Gasoline","artist":"The Weeknd","position":49,"addedByName":"Alex Barker","addedByImage":"ab","albumArt":"/assets/art/The Weeknd Gasoline.png"},{"name":"Jackie Down The Line","artist":"Fontaines D.C.","position":50,"addedByName":"Jack McGrath","addedByImage":"jm","albumArt":"/assets/art/Fontaines D.C. Jackie Down The Line.png"},{"name":"Troglodyte","artist":"Viagra Boys","position":51,"addedByName":"Jack McGrath","addedByImage":"jm","albumArt":"/assets/art/Viagra Boys Troglodyte.png"},{"name":"Walkin","artist":"Denzel Curry","position":52,"addedByName":"Joshua Landy","addedByImage":"jl","albumArt":"/assets/art/Denzel Curry Walkin.png"},{"name":"Bad Habit","artist":"Steve Lacy","position":53,"addedByName":"Griffyn Heels","addedByImage":"gh","albumArt":"/assets/art/Steve Lacy Bad Habit.png"},{"name":"DON'T TELL THE BOYS","artist":"Petey","position":54,"addedByName":"Alex Barker","addedByImage":"ab","albumArt":"/assets/art/Petey DON'T TELL THE BOYS.png"},{"name":"I Don't Wanna Do Nothing Forever","artist":"The Smith Street Band","position":55,"addedByName":"Daniel Hornblower","addedByImage":"db","albumArt":"/assets/art/The Smith Street Band I Don't Wanna Do Nothing Forever.png"},{"name":"Children of the Empire","artist":"Weyes Blood","position":56,"addedByName":"Josh Anderson","addedByImage":"ja","albumArt":"/assets/art/Weyes Blood Children of the Empire.png"},{"name":"Baby Criminal","artist":"Viagra Boys","position":57,"addedByName":"Josh Anderson","addedByImage":"ja","albumArt":"/assets/art/Viagra Boys Baby Criminal.png"},{"name":"Easy On Your Own?","artist":"Alvvays","position":58,"addedByName":"Jack McGrath","addedByImage":"jm","albumArt":"/assets/art/Alvvays Easy On Your Own.png"},{"name":"B.O.T.A. (Baddest Of Them All) - Edit","artist":"Eliza Rose, Interplanetary Criminal","position":59,"addedByName":"Chris Quigley","addedByImage":"cq","albumArt":"/assets/art/Eliza Rose, Interplanetary Criminal B.O.T.A. (Baddest Of Them All) - Edit.png"},{"name":"Mr. Morale","artist":"Kendrick Lamar, Tanna Leone","position":60,"addedByName":"Chris Quigley","addedByImage":"cq","albumArt":"/assets/art/Kendrick Lamar, Tanna Leone Mr. Morale.png"},{"name":"About Damn Time","artist":"Lizzo","position":61,"addedByName":"Griffyn Heels","addedByImage":"gh","albumArt":"/assets/art/Lizzo About Damn Time.png"},{"name":"You Are Every Girl to Me","artist":"MJ Lenderman","position":62,"addedByName":"Josh Anderson","addedByImage":"ja","albumArt":"/assets/art/MJ Lenderman You Are Every Girl to Me.png"},{"name":"Vocoder","artist":"Floating Points","position":63,"addedByName":"Griffyn Heels","addedByImage":"gh","albumArt":"/assets/art/Floating Points Vocoder.png"},{"name":"GO STUPID","artist":"Sickmode","position":64,"addedByName":"Braeden Wilson","addedByImage":"bw","albumArt":"/assets/art/Sickmode GO STUPID.png"},{"name":"Concorde","artist":"Black Country, New Road","position":65,"addedByName":"Josh Anderson","addedByImage":"ja","albumArt":"/assets/art/Black Country, New Road Concorde.png"},{"name":"Surround Sound (feat. 21 Savage & Baby Tate)","artist":"JID, 21 Savage, Baby Tate","position":66,"addedByName":"Chris Quigley","addedByImage":"cq","albumArt":"/assets/art/JID, 21 Savage, Baby Tate Surround Sound (feat. 21 Savage & Baby Tate).png"},{"name":"Return To Monke","artist":"Viagra Boys","position":67,"addedByName":"Joshua Landy","addedByImage":"jl","albumArt":"/assets/art/Viagra Boys Return To Monke.png"},{"name":"Burn Dem Bridges","artist":"Skin On Skin","position":68,"addedByName":"Chris Quigley","addedByImage":"cq","albumArt":"/assets/art/Skin On Skin Burn Dem Bridges.png"},{"name":"Libre","artist":"Angèle","position":69,"addedByName":"Alex Karney","addedByImage":"ak","albumArt":"/assets/art/Angèle Libre.png"},{"name":"We Came To Play","artist":"Show Me the Body","position":70,"addedByName":"Jack McGrath","addedByImage":"jm","albumArt":"/assets/art/Show Me the Body We Came To Play.png"},{"name":"SLAY!!","artist":"Paledusk, Hideyoshi","position":71,"addedByName":"Alex Barker","addedByImage":"ab","albumArt":"/assets/art/Paledusk, Hideyoshi SLAY!!.png"},{"name":"Strangers (feat. A$AP Rocky and Run The Jewels)","artist":"Danger Mouse, Black Thought, A$AP Rocky, Run The Jewels","position":72,"addedByName":"Griffyn Heels","addedByImage":"gh","albumArt":"/assets/art/Danger Mouse, Black Thought, A$AP Rocky, Run The Jewels Strangers (feat. A$AP Rocky and Run The Jewels).png"},{"name":"Rich Flex","artist":"Drake, 21 Savage","position":73,"addedByName":"Chris Quigley","addedByImage":"cq","albumArt":"/assets/art/Drake, 21 Savage Rich Flex.png"},{"name":"impossible","artist":"Wasia Project","position":74,"addedByName":"Alex Karney","addedByImage":"ak","albumArt":"/assets/art/Wasia Project impossible.png"},{"name":"Reverse the Curse","artist":"Alexisonfire","position":75,"addedByName":"Alex Barker","addedByImage":"ab","albumArt":"/assets/art/Alexisonfire Reverse the Curse.png"},{"name":"Mel Made Me Do It","artist":"Stormzy","position":76,"addedByName":"Griffyn Heels","addedByImage":"gh","albumArt":"/assets/art/Stormzy Mel Made Me Do It.png"},{"name":"Danielle (smile on my face)","artist":"Fred again..","position":77,"addedByName":"Alex Barker","addedByImage":"ab","albumArt":"/assets/art/Fred again.. Danielle (smile on my face).png"},{"name":"Lafayette","artist":"Orville Peck","position":78,"addedByName":"Daniel Hornblower","addedByImage":"db","albumArt":"/assets/art/Orville Peck Lafayette.png"},{"name":"Portal","artist":"Daniel Levak","position":79,"addedByName":"Braeden Wilson","addedByImage":"bw","albumArt":"/assets/art/Daniel Levak Portal.png"},{"name":"Someday - salute Remix","artist":"DJ Seinfeld, salute","position":80,"addedByName":"Griffyn Heels","addedByImage":"gh","albumArt":"/assets/art/DJ Seinfeld, salute Someday - salute Remix.png"},{"name":"Cigarettes","artist":"Oliver Tree","position":81,"addedByName":"Daniel Hornblower","addedByImage":"db","albumArt":"/assets/art/Oliver Tree Cigarettes.png"},{"name":"Habits","artist":"PUP","position":82,"addedByName":"Chris Quigley","addedByImage":"cq","albumArt":"/assets/art/PUP Habits.png"},{"name":"Hate Dancin'","artist":"King Gizzard & The Lizard Wizard","position":83,"addedByName":"Joshua Landy","addedByImage":"jl","albumArt":"/assets/art/King Gizzard & The Lizard Wizard Hate Dancin'.png"},{"name":"Glimpse of Us","artist":"Joji","position":84,"addedByName":"Alex Karney","addedByImage":"ak","albumArt":"/assets/art/Joji Glimpse of Us.png"},{"name":"The Loneliest Time (feat. Rufus Wainwright)","artist":"Carly Rae Jepsen, Rufus Wainwright","position":85,"addedByName":"Chris Quigley","addedByImage":"cq","albumArt":"/assets/art/Carly Rae Jepsen, Rufus Wainwright The Loneliest Time (feat. Rufus Wainwright).png"},{"name":"Bad Habits (feat. Bring Me The Horizon)","artist":"Ed Sheeran, Bring Me The Horizon","position":86,"addedByName":"Braeden Wilson","addedByImage":"bw","albumArt":"/assets/art/Ed Sheeran, Bring Me The Horizon Bad Habits (feat. Bring Me The Horizon).png"},{"name":"I Ain't Worried","artist":"OneRepublic","position":87,"addedByName":"Braeden Wilson","addedByImage":"bw","albumArt":"/assets/art/OneRepublic I Ain't Worried.png"},{"name":"Party Time","artist":"The Northern Boys","position":88,"addedByName":"Alex Barker","addedByImage":"ab","albumArt":"/assets/art/The Northern Boys Party Time.png"},{"name":"TOMMY HANKS","artist":"Jakey","position":89,"addedByName":"Joshua Landy","addedByImage":"jl","albumArt":"/assets/art/Jakey TOMMY HANKS.png"},{"name":"Chaos Space Marine","artist":"Black Country, New Road","position":90,"addedByName":"Griffyn Heels","addedByImage":"gh","albumArt":"/assets/art/Black Country, New Road Chaos Space Marine.png"},{"name":"Messe de E-102 (Album Version)","artist":"death's dynamic shroud","position":91,"addedByName":"Jack McGrath","addedByImage":"jm","albumArt":"/assets/art/death's dynamic shroud Messe de E-102 (Album Version).png"},{"name":"midnight sun","artist":"Nilüfer Yanya","position":92,"addedByName":"Chris Quigley","addedByImage":"cq","albumArt":"/assets/art/Nilüfer Yanya midnight sun.png"},{"name":"Clara (the night is dark)","artist":"Fred again.., Clara Ward","position":93,"addedByName":"Griffyn Heels","addedByImage":"gh","albumArt":"/assets/art/Fred again.., Clara Ward Clara (the night is dark).png"},{"name":"INTO THE DARK","artist":"Void Of Vision","position":94,"addedByName":"Braeden Wilson","addedByImage":"bw","albumArt":"/assets/art/Void Of Vision INTO THE DARK.png"},{"name":"Best Life","artist":"Alex Cameron","position":95,"addedByName":"Joshua Landy","addedByImage":"jl","albumArt":"/assets/art/Alex Cameron Best Life.png"},{"name":"Kill Bill","artist":"SZA","position":96,"addedByName":"Chris Quigley","addedByImage":"cq","albumArt":"/assets/art/SZA Kill Bill.png"},{"name":"K Hole","artist":"Alex Cameron","position":97,"addedByName":"Josh Anderson","addedByImage":"ja","albumArt":"/assets/art/Alex Cameron K Hole.png"},{"name":"As It Was","artist":"Harry Styles","position":98,"addedByName":"Alex Karney","addedByImage":"ak","albumArt":"/assets/art/Harry Styles As It Was.png"},{"name":"Unpeopled Space","artist":"Daniel Rossen","position":99,"addedByName":"Jack McGrath","addedByImage":"jm","albumArt":"/assets/art/Daniel Rossen Unpeopled Space.png"},{"name":"Without You","artist":"Avantdale Bowling Club","position":100,"addedByName":"Alex Barker","addedByImage":"ab","albumArt":"/assets/art/Avantdale Bowling Club Without You.png"}];

  constructor() {
    this.nowPlayingTrack$ = this.getTracks().pipe(map((tracks) => tracks.shift()));
    this.tracks$ = this.getTracks().pipe(map((tracks) => { 
      if (tracks.length === 0) {
        this.noTracksToShow$.next(true);
      }
      return tracks
    }),
    catchError((err) => { 
      this.error$.next(err.message);
      return of();
    }));
    this.tracksByUser$ = this.getTracksByUser();
  }

  private getTracks(): Observable<TrackModel[]> {
    return of(this.trackListResponse);
  }

  private getTracksByUser(): Observable<Record<string, number>> {
    return of(this.userSummaryResponse);
  }

  getHeadImage(fileName: string) {
    return `/assets/images/${fileName}.png`;
  }

  getAlbumArt(fileName: string) {
    return `${fileName}`;
  }
}
